# å‰åŽç«¯åˆ†ç¦»å¿«é€Ÿå…¥é—¨

## æ¦‚è¿°

æœ¬é¡¹ç›®å·²ç»ä»Ž Next.js å…¨æ ˆåº”ç”¨è¿ç§»åˆ°å‰åŽç«¯åˆ†ç¦»æž¶æž„ï¼š

- **åŽç«¯**: Go (Gin æ¡†æž¶) + SQLiteï¼ˆç«¯å£ 8080ï¼‰
- **å‰ç«¯**: Next.js Reactï¼ˆç«¯å£ 3000ï¼‰

å‰ç«¯é€šè¿‡çŽ¯å¢ƒå˜é‡é…ç½®çš„ API åœ°å€ä¸ŽåŽç«¯é€šä¿¡ã€‚

## å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼‰

### æ­¥éª¤ 1: åˆ›å»ºçŽ¯å¢ƒå˜é‡æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```bash
cat > .env.local << 'EOF'
NEXT_PUBLIC_API_BASE_URL=http://localhost:8080/api
EOF
```

æˆ–è€…æ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶å¹¶æ·»åŠ ä¸Šè¿°å†…å®¹ã€‚

### æ­¥éª¤ 2: å¯åŠ¨ Go åŽç«¯

```bash
cd server
./bin/server
```

ä½ åº”è¯¥çœ‹åˆ°ï¼š
```
[GIN-debug] Listening and serving HTTP on :8080
```

**éªŒè¯åŽç«¯è¿è¡Œ**:
```bash
curl http://localhost:8080/api/health
# åº”è¯¥è¿”å›ž: {"status":"ok","time":"..."}
```

### æ­¥éª¤ 3: å¯åŠ¨ Next.js å‰ç«¯

åœ¨æ–°ç»ˆç«¯ä¸­ï¼š

```bash
# å›žåˆ°é¡¹ç›®æ ¹ç›®å½•
cd ..

# å¯åŠ¨å‰ç«¯
pnpm dev
# æˆ–
npm run dev
```

ä½ åº”è¯¥çœ‹åˆ°ï¼š
```
ready - started server on 0.0.0.0:3000
```

### æ­¥éª¤ 4: è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`

å‰ç«¯å°†è‡ªåŠ¨ä»Ž Go åŽç«¯èŽ·å–æ•°æ®ã€‚

## éªŒè¯é…ç½®

### æ–¹æ³• 1: è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
node scripts/test-api-integration.js
```

è¿™å°†æµ‹è¯•æ‰€æœ‰ API ç«¯ç‚¹å¹¶æ˜¾ç¤ºç»“æžœã€‚

### æ–¹æ³• 2: æ£€æŸ¥æµè§ˆå™¨ç½‘ç»œè¯·æ±‚

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° Network æ ‡ç­¾
3. åˆ·æ–°é¡µé¢
4. æ£€æŸ¥è¯·æ±‚æ˜¯å¦å‘é€åˆ° `http://localhost:8080/api/*`

### æ–¹æ³• 3: æ‰‹åŠ¨æµ‹è¯• API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/api/health

# èŽ·å–æ–‡ç« åˆ—è¡¨
curl http://localhost:8080/api/posts?page=1&pageSize=5

# èŽ·å–åˆ†ç±»
curl http://localhost:8080/api/categories

# èŽ·å–ç«™ç‚¹é…ç½®
curl http://localhost:8080/api/config
```

## å¸¸è§é—®é¢˜

### Q: å‰ç«¯æ— æ³•è¿žæŽ¥åŽç«¯

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. Go åŽç«¯æ˜¯å¦è¿è¡Œï¼Ÿ
   ```bash
   curl http://localhost:8080/api/health
   ```

2. `.env.local` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”é…ç½®æ­£ç¡®ï¼Ÿ
   ```bash
   cat .env.local
   ```

3. ä¿®æ”¹ `.env.local` åŽæ˜¯å¦é‡å¯äº† Next.jsï¼Ÿ
   ```bash
   # Ctrl+C åœæ­¢ï¼Œç„¶åŽé‡æ–°è¿è¡Œ
   pnpm dev
   ```

### Q: CORS é”™è¯¯

**A**: ç¡®ä¿ Go åŽç«¯çš„ CORS é…ç½®å…è®¸å‰ç«¯åŸŸåã€‚

ç¼–è¾‘ `server/internal/middleware/cors.go`ï¼š
```go
allowedOrigins := []string{
    "http://localhost:3000",
    "http://127.0.0.1:3000",
}
```

### Q: å¦‚ä½•åˆ‡å›žä½¿ç”¨ Next.js åŽç«¯ï¼Ÿ

**A**: åˆ é™¤æˆ–é‡å‘½å `.env.local` æ–‡ä»¶ï¼Œç„¶åŽé‡å¯ Next.jsï¼š

```bash
mv .env.local .env.local.backup
pnpm dev
```

### Q: ç”Ÿäº§çŽ¯å¢ƒå¦‚ä½•é…ç½®ï¼Ÿ

**A**: ä¿®æ”¹ `.env.local` ä¸­çš„ API åœ°å€ï¼š

```env
NEXT_PUBLIC_API_BASE_URL=https://your-api-domain.com/api
```

## ç›®å½•ç»“æž„

```
nextblog/
â”œâ”€â”€ .env.local              # å‰ç«¯çŽ¯å¢ƒå˜é‡ï¼ˆéœ€åˆ›å»ºï¼‰
â”œâ”€â”€ server/                 # Go åŽç«¯
â”‚   â”œâ”€â”€ bin/server         # åŽç«¯äºŒè¿›åˆ¶æ–‡ä»¶
â”‚   â”œâ”€â”€ data/              # SQLite æ•°æ®åº“
â”‚   â””â”€â”€ storage/           # å›¾ç‰‡å­˜å‚¨
â”œâ”€â”€ app/                   # Next.js å‰ç«¯
â”‚   â”œâ”€â”€ services/          # API æœåŠ¡å±‚ï¼ˆå·²æ›´æ–°ï¼‰
â”‚   â””â”€â”€ ...
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ test-api-integration.js  # API æµ‹è¯•è„šæœ¬
â”œâ”€â”€ ENV_SETUP.md           # çŽ¯å¢ƒå˜é‡è¯¦ç»†è¯´æ˜Ž
â”œâ”€â”€ API_MIGRATION.md       # API è¿ç§»æŒ‡å—
â””â”€â”€ QUICKSTART_API.md      # æœ¬æ–‡ä»¶
```

## ä¸‹ä¸€æ­¥

- é˜…è¯» [API_MIGRATION.md](./API_MIGRATION.md) äº†è§£è¯¦ç»†çš„ API æ˜ å°„
- é˜…è¯» [ENV_SETUP.md](./ENV_SETUP.md) äº†è§£çŽ¯å¢ƒå˜é‡é…ç½®
- é˜…è¯» [PROJECT_SUMMARY.md](./PROJECT_SUMMARY.md) äº†è§£é¡¹ç›®æž¶æž„

## å¼€å‘æµç¨‹

### æ—¥å¸¸å¼€å‘

1. **å¯åŠ¨åŽç«¯**ï¼ˆåœ¨ä¸€ä¸ªç»ˆç«¯ï¼‰
   ```bash
   cd server
   make dev  # æˆ– ./bin/server
   ```

2. **å¯åŠ¨å‰ç«¯**ï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰
   ```bash
   pnpm dev
   ```

3. **å¼€å‘å’Œæµ‹è¯•**
   - å‰ç«¯ä¿®æ”¹ä¼šè‡ªåŠ¨çƒ­é‡è½½
   - åŽç«¯ä¿®æ”¹éœ€è¦é‡å¯æœåŠ¡ï¼ˆæˆ–ä½¿ç”¨ `make dev` å¯ç”¨çƒ­é‡è½½ï¼‰

### éƒ¨ç½²

#### Docker éƒ¨ç½²ï¼ˆæŽ¨èï¼‰

```bash
# æž„å»ºå’Œå¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

#### æ‰‹åŠ¨éƒ¨ç½²

**åŽç«¯**:
```bash
cd server
go build -o bin/server cmd/server/main.go
./bin/server
```

**å‰ç«¯**:
```bash
pnpm build
pnpm start
```

## æŠ€æœ¯æ ˆ

### åŽç«¯
- Go 1.22+
- Gin Web Framework
- GORM ORM
- SQLite Database

### å‰ç«¯
- Next.js 14
- React 18
- TypeScript
- Tailwind CSS

### é€šä¿¡
- RESTful API
- JSON æ•°æ®æ ¼å¼
- JWT è®¤è¯ï¼ˆå¯é€‰ï¼‰

## èŽ·å–å¸®åŠ©

å¦‚æžœé‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥ [API_MIGRATION.md](./API_MIGRATION.md) çš„æ•…éšœæŽ’é™¤éƒ¨åˆ†
2. æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
3. æ£€æŸ¥æµè§ˆå™¨æŽ§åˆ¶å°çš„é”™è¯¯
4. è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯ API è¿žæŽ¥

## å·²çŸ¥é™åˆ¶

ä»¥ä¸‹åŠŸèƒ½åœ¨ Go åŽç«¯ä¸­æš‚æœªå®žçŽ°ï¼š

- âš ï¸ å›¾ç‰‡ç¼©ç•¥å›¾è‡ªåŠ¨ç”Ÿæˆï¼ˆä½¿ç”¨åŽŸå›¾ä»£æ›¿ï¼‰
- âš ï¸ ç³»ç»ŸçŠ¶æ€ç›‘æŽ§ APIï¼ˆå¯ç”¨å¥åº·æ£€æŸ¥æ›¿ä»£ï¼‰
- âš ï¸ AI å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½
- âš ï¸ æŒ‰åšå®¢åˆ†ç»„çš„èµ„äº§ç®¡ç†

è¿™äº›åŠŸèƒ½å°†åœ¨åŽç»­ç‰ˆæœ¬ä¸­å®žçŽ°ã€‚

## æ›´æ–°æ—¥å¿—

- **2025-11-29**: å®Œæˆå‰åŽç«¯åˆ†ç¦»ï¼Œæ‰€æœ‰ä¸»è¦ API å·²è¿ç§»
- **2025-11-29**: åˆ›å»ºçŽ¯å¢ƒå˜é‡é…ç½®ç³»ç»Ÿ
- **2025-11-29**: æ›´æ–°æ‰€æœ‰æœåŠ¡å±‚ä»¥æ”¯æŒ Go åŽç«¯

---

**ç¥å¼€å‘æ„‰å¿«ï¼** ðŸš€

