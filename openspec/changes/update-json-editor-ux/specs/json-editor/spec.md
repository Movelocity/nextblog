## ADDED Requirements

### Requirement: 编辑框水平调整大小
编辑框除了支持垂直调整大小外，还 SHALL 支持水平调整大小，允许用户根据内容和工作流程自由调整编辑区域尺寸。

#### Scenario: 水平拖动调整宽度
- **WHEN** 用户在编辑框右侧边缘按下鼠标并拖动
- **THEN** 编辑框宽度随鼠标移动实时改变
- **AND** 宽度被限制在合理范围内（300px 至 1200px）
- **AND** 新的宽度被持久化到 localStorage

#### Scenario: 水平和垂直调整结合
- **WHEN** 用户先调整宽度再调整高度（或相反顺序）
- **THEN** 两个维度的尺寸都被独立保存
- **AND** 编辑框保持在网格布局内正常显示
- **AND** 调整过程流畅无卡顿

#### Scenario: 响应式设备上的调整行为
- **WHEN** 在移动设备（宽度 < 640px）上查看编辑器
- **THEN** 水平调整功能被禁用（因为单列布局）
- **AND** 仅垂直调整手柄显示和可用

---

### Requirement: 编辑框内快速脚本选择器
每个编辑框底部 SHALL 提供一个下拉选择器，让用户可以快速选择并执行已保存的自定义脚本，而无需打开全局脚本管理模态框。

#### Scenario: 显示已保存脚本列表
- **WHEN** 用户点击编辑框底部的脚本下拉选择器
- **THEN** 显示所有已保存的自定义脚本列表
- **AND** 每个脚本显示名称和简短描述（如果有）
- **AND** 列表按保存时间或名称排序

#### Scenario: 选择并执行脚本
- **WHEN** 用户从脚本下拉框选择一个脚本
- **THEN** 该脚本立即在当前编辑框的内容上执行
- **AND** 执行结果替换编辑框内容（成功时）
- **AND** 显示 Toast 通知反馈执行状态
- **AND** 下拉框重置为默认状态

#### Scenario: 无脚本时的空状态
- **WHEN** 用户尚未创建任何自定义脚本
- **THEN** 脚本下拉选择器显示禁用状态或提示文本
- **AND** 提示用户点击全局工具栏的"自定义脚本"按钮创建脚本

#### Scenario: 脚本执行过程中的反馈
- **WHEN** 用户选择一个脚本并开始执行
- **THEN** 下拉选择器显示加载指示器（如果脚本执行时间 > 100ms）
- **AND** 脚本执行完成后显示 Toast 通知（成功或错误）
- **AND** 如果脚本执行超时或出错，内容保持不变

---

## MODIFIED Requirements

### Requirement: 错误处理和用户反馈
系统 SHALL 为操作提供清晰的反馈，并优雅地处理错误，使用非侵入式通知系统，避免页面内容抖动。

#### Scenario: 操作成功反馈
- **WHEN** 任何文本操作成功完成
- **THEN** 显示一个简短的 Toast 成功消息（例如 "JSON 已格式化"、"内容已复制"）
- **AND** Toast 消息在 2 秒后自动消失
- **AND** Toast 使用固定定位，不影响页面布局

#### Scenario: 操作错误反馈
- **WHEN** 任何文本操作失败（例如无效 JSON、脚本错误）
- **THEN** 显示一个 Toast 错误消息，包含具体错误详情
- **AND** Toast 错误消息持续显示直到自动消失（3 秒）或用户手动关闭
- **AND** Toast 使用固定定位，不影响页面布局
- **AND** 编辑框内容保持不变

#### Scenario: 自定义脚本执行错误
- **WHEN** 自定义脚本抛出错误或超时
- **THEN** 显示 Toast 错误消息，包含错误信息
- **AND** 编辑框内容不被修改
- **AND** 用户可以编辑脚本修复问题

---

### Requirement: 中文界面本地化
系统界面文本 SHALL 使用中文，以服务当前的中国用户群体，提供更友好的用户体验。

#### Scenario: 主界面文本中文化
- **WHEN** 用户访问 JSON 编辑器页面
- **THEN** 页面标题、描述、按钮标签全部显示为中文
- **AND** 工具栏按钮文本为中文（"添加编辑框"、"自定义脚本"、"导入"、"导出"、"重置"）
- **AND** 统计信息文本为中文（"N 个编辑框 • M 个脚本"）

#### Scenario: 编辑框控件文本中文化
- **WHEN** 用户与编辑框交互
- **THEN** 所有按钮提示（title）和标签显示为中文
- **AND** 编辑框类型名称为中文（"纯文本"、"代码编辑器"、"Markdown 预览"）
- **AND** 语言选择器选项为中文（"JSON"、"JavaScript"、"Markdown"、"纯文本"）
- **AND** 操作下拉菜单选项为中文（"格式化 JSON"、"压缩 JSON"、"转义字符串" 等）

#### Scenario: 通知消息中文化
- **WHEN** 系统显示任何通知消息
- **THEN** 通知内容使用中文
- **AND** 成功消息如 "编辑框已添加"、"操作已应用"、"状态已导出"
- **AND** 错误消息如 "无法删除最后一个编辑框"、"无效的 JSON"、"导入失败"

#### Scenario: 模态框和对话框中文化
- **WHEN** 用户打开自定义脚本模态框或确认对话框
- **THEN** 所有标题、标签、按钮、提示文本显示为中文
- **AND** 占位符文本显示为中文（"我的自定义脚本"、"这个脚本做什么？"）
- **AND** 确认对话框消息为中文（"确定要重置吗？所有编辑框和脚本将被清空。"）

